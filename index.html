<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Planilha do Leozin</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #020617; /* Slate 950 */
        color: #f1f5f9;
      }
      
      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #1e293b;
      }
      ::-webkit-scrollbar-thumb {
        background: #475569;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }

      .text-stroke-red {
        -webkit-text-stroke: 1px #7f1d1d;
      }

      /* Spreadsheet Styles */
      .spreadsheet-grid {
        display: grid;
        grid-template-columns: 1fr 3fr 3fr 3fr 2fr;
      }
      
      @media print {
        body { background-color: white; color: black; }
        .no-print { display: none !important; }
        .print-border { border: 1px solid black; }
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
  <body>
    
    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="fixed inset-0 z-50 flex items-center justify-center bg-slate-950 p-4">
      <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center opacity-20 pointer-events-none"></div>
      <div class="absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/80 to-slate-900/50 pointer-events-none"></div>

      <div class="relative z-10 w-full max-w-md bg-slate-900/80 backdrop-blur-xl border border-slate-700/50 p-8 rounded-2xl shadow-2xl shadow-red-900/20">
        <div class="text-center mb-8">
           <h1 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-red-500 uppercase tracking-widest">
              PLANILHA DO<br/>
              <span class="text-5xl text-red-500 text-stroke-red drop-shadow-lg">LEOZIN</span>
           </h1>
           <p class="text-slate-400 text-sm mt-4 font-medium tracking-wide">ÁREA RESTRITA</p>
        </div>

        <form id="login-form" class="space-y-6">
          <div class="space-y-2">
            <label class="text-xs font-bold text-slate-500 uppercase tracking-wider ml-1">Usuário</label>
            <div class="relative group">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i data-lucide="user" class="h-5 w-5 text-slate-500"></i>
              </div>
              <input type="text" id="username" class="block w-full pl-10 pr-3 py-3 border border-slate-700 rounded-xl bg-slate-950/50 text-slate-300 focus:ring-2 focus:ring-yellow-500 focus:border-transparent outline-none transition-all" placeholder="Usuário">
            </div>
          </div>

          <div class="space-y-2">
            <label class="text-xs font-bold text-slate-500 uppercase tracking-wider ml-1">Senha</label>
            <div class="relative group">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i data-lucide="lock" class="h-5 w-5 text-slate-500"></i>
              </div>
              <input type="password" id="password" class="block w-full pl-10 pr-3 py-3 border border-slate-700 rounded-xl bg-slate-950/50 text-slate-300 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-all" placeholder="••••••">
            </div>
          </div>

          <div id="login-error" class="hidden p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm flex items-center gap-2">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            <span>Credenciais inválidas.</span>
          </div>

          <button type="submit" class="w-full py-3 px-4 font-bold rounded-xl text-white bg-gradient-to-r from-red-600 to-red-800 hover:from-red-500 hover:to-red-700 shadow-lg shadow-red-900/30 transform transition-all hover:scale-[1.02]">
            ACESSAR SISTEMA
          </button>
        </form>
      </div>
    </div>

    <!-- APP CONTENT -->
    <div id="app-content" class="hidden min-h-screen pb-12">
      
      <!-- Header -->
      <div class="sticky top-0 z-40 bg-slate-900/90 backdrop-blur-md border-b border-slate-800 shadow-xl no-print">
        <div class="max-w-7xl mx-auto px-4 py-3">
          <header className="flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <div class="p-2 bg-gradient-to-tr from-red-600 to-yellow-600 rounded-lg shadow-lg">
                  <i data-lucide="activity" class="w-6 h-6 text-white"></i>
                </div>
                <div>
                  <h1 class="text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-red-500 uppercase tracking-tight">PLANILHA DO LEOZIN</h1>
                  <p id="save-status" class="text-[10px] text-slate-500 font-medium uppercase tracking-widest flex items-center gap-1">
                      <i data-lucide="save" class="w-3 h-3"></i> 
                      <span>Salvo</span>
                  </p>
                </div>
              </div>
              
              <!-- Mobile Controls Toggle could go here -->
            </div>
            
            <div class="flex items-center gap-4 ml-auto">
               <!-- Configs -->
               <div class="flex items-center gap-2 bg-slate-900 p-1 rounded-xl border border-slate-700/50">
                  <div class="flex items-center gap-2 px-3 py-1.5 bg-slate-800 rounded-lg border border-slate-700">
                      <i data-lucide="percent" class="w-3.5 h-3.5 text-blue-400"></i>
                      <input type="number" id="config-percent" class="w-16 bg-transparent text-sm font-bold text-white outline-none text-center" placeholder="%">
                      <span class="text-xs text-slate-500 font-medium">% dia</span>
                  </div>
                  <div class="flex items-center gap-2 px-3 py-1.5 bg-slate-800 rounded-lg border border-slate-700">
                      <i data-lucide="calendar" class="w-3.5 h-3.5 text-purple-400"></i>
                      <input type="number" id="config-days" class="w-16 bg-transparent text-sm font-bold text-white outline-none text-center" placeholder="Dias">
                      <span class="text-xs text-slate-500 font-medium">dias</span>
                  </div>
               </div>

               <!-- Actions -->
               <div class="flex items-center gap-2">
                   <button onclick="window.print()" class="p-2.5 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg border border-slate-700 transition-all" title="Imprimir">
                       <i data-lucide="printer" class="w-4 h-4"></i>
                   </button>
                   <button onclick="app.resetData()" class="flex items-center gap-2 px-3 py-2.5 bg-slate-800 hover:bg-red-900/30 text-slate-300 hover:text-red-400 rounded-lg border border-slate-700 transition-all text-xs font-bold uppercase">
                       <i data-lucide="trash-2" class="w-4 h-4"></i>
                       <span class="hidden md:inline">Excluir</span>
                   </button>
                   <button onclick="app.logout()" class="p-2.5 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg border border-slate-700 transition-all" title="Sair">
                       <i data-lucide="log-out" class="w-4 h-4"></i>
                   </button>
               </div>
            </div>
          </header>
        </div>
      </div>

      <div class="max-w-7xl mx-auto p-4 flex flex-col lg:flex-row gap-6">
        
        <!-- MAIN COLUMN -->
        <div class="flex-1 space-y-6 min-w-0">
          
           <!-- INPUT & STATS HUD -->
           <div class="grid grid-cols-1 md:grid-cols-12 gap-4">
              <!-- Capital -->
              <div class="md:col-span-4 relative group">
                  <div class="absolute inset-0 bg-yellow-500/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-all"></div>
                  <div class="relative bg-slate-900 border border-slate-700 rounded-2xl p-5 print-border">
                      <label class="text-xs text-slate-500 font-bold uppercase tracking-wider mb-2 flex items-center gap-2">
                        <i data-lucide="wallet" class="w-4 h-4"></i> Banca Inicial
                      </label>
                      <div class="flex items-center gap-2">
                          <span class="text-slate-400 font-bold text-xl">R$</span>
                          <input type="number" id="input-capital" placeholder="0.00" class="w-full bg-transparent text-3xl font-bold text-white placeholder-slate-600 outline-none">
                      </div>
                  </div>
              </div>
              
              <!-- Stats -->
              <div class="md:col-span-8 grid grid-cols-2 gap-4">
                  <div class="bg-slate-800/50 border border-slate-700 rounded-2xl p-5 relative overflow-hidden print-border">
                      <i data-lucide="trophy" class="absolute right-0 top-0 m-3 w-16 h-16 text-emerald-500/10"></i>
                      <p class="text-xs text-slate-400 uppercase font-semibold mb-1">Saldo Atual</p>
                      <p id="display-balance" class="text-3xl font-mono font-bold tracking-tight text-slate-200">R$ 0,00</p>
                  </div>
                  <div class="bg-slate-800/50 border border-slate-700 rounded-2xl p-5 relative overflow-hidden print-border">
                      <i data-lucide="trending-up" class="absolute right-0 top-0 m-3 w-16 h-16 text-blue-500/10"></i>
                      <p class="text-xs text-blue-400 uppercase font-semibold mb-1">Potencial Final</p>
                      <p id="display-projected" class="text-3xl font-mono font-bold tracking-tight text-white">R$ 0,00</p>
                  </div>
              </div>
           </div>

           <!-- NOTES -->
           <div class="bg-slate-900 border border-slate-800 rounded-2xl relative overflow-hidden shadow-lg no-print">
               <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500 via-red-500 to-purple-500"></div>
               <div class="p-5">
                  <div class="flex justify-between items-center mb-2">
                      <h3 class="font-semibold text-slate-200 flex items-center gap-2">
                          <i data-lucide="pen-line" class="w-4 h-4 text-blue-400"></i>
                          Minhas Anotações
                      </h3>
                  </div>
                  <textarea id="user-notes" class="w-full h-24 bg-slate-950/50 border border-slate-700 rounded-xl p-4 text-slate-300 text-sm focus:outline-none focus:border-blue-500/50 resize-y" placeholder="Escreva suas observações aqui..."></textarea>
               </div>
           </div>

           <!-- CHARTS -->
           <div class="grid grid-cols-1 md:grid-cols-2 gap-4 no-print">
               <div class="bg-slate-900 border border-slate-800 rounded-2xl p-4 shadow-lg h-60">
                   <h3 class="text-xs text-slate-400 font-bold uppercase mb-2">Crescimento da Banca</h3>
                   <div class="relative h-48 w-full">
                       <canvas id="growthChart"></canvas>
                   </div>
               </div>
               <div class="bg-slate-900 border border-slate-800 rounded-2xl p-4 shadow-lg h-60">
                   <h3 class="text-xs text-slate-400 font-bold uppercase mb-2">Resultados Diários</h3>
                   <div class="relative h-48 w-full">
                       <canvas id="barChart"></canvas>
                   </div>
               </div>
           </div>

           <!-- SPREADSHEET TABLE -->
           <div class="rounded-lg overflow-hidden shadow-2xl border-4 border-slate-800">
               <!-- Header -->
               <div class="spreadsheet-grid bg-yellow-400 text-black font-bold text-sm uppercase text-center border-b-2 border-black">
                   <div class="p-2 border-r border-black">Dia</div>
                   <div class="p-2 border-r border-black">Banca</div>
                   <div class="p-2 border-r border-black">Porcentagem</div>
                   <div class="p-2 border-r border-black">Lucro</div>
                   <div class="p-2">Stop Win</div>
               </div>
               <!-- Body -->
               <div id="table-body" class="bg-white max-h-[800px] overflow-y-auto">
                   <!-- Rows will be injected here via JS -->
               </div>
           </div>

        </div>

        <!-- SIDEBAR HISTORY -->
        <div class="lg:w-80 space-y-4 shrink-0 no-print">
            <div class="grid grid-cols-2 gap-3">
                <div class="bg-slate-900 p-3 rounded-xl border border-slate-800 flex flex-col items-center">
                    <span class="text-xs text-slate-500 uppercase font-bold mb-1">Wins</span>
                    <div class="flex items-center gap-1.5 text-emerald-400 font-bold text-xl">
                        <i data-lucide="check-circle-2" class="w-4 h-4"></i>
                        <span id="stat-wins">0</span>
                    </div>
                </div>
                <div class="bg-slate-900 p-3 rounded-xl border border-slate-800 flex flex-col items-center">
                    <span class="text-xs text-slate-500 uppercase font-bold mb-1">Losses</span>
                    <div class="flex items-center gap-1.5 text-red-400 font-bold text-xl">
                        <i data-lucide="x-circle" class="w-4 h-4"></i>
                        <span id="stat-losses">0</span>
                    </div>
                </div>
            </div>

            <div class="bg-slate-900 border border-slate-800 rounded-xl overflow-hidden flex flex-col h-[600px] sticky top-24">
                <div class="p-4 border-b border-slate-800 bg-slate-950/50 flex items-center gap-2">
                    <i data-lucide="history" class="w-4 h-4 text-blue-400"></i>
                    <h3 class="font-semibold text-slate-200 text-sm">Histórico Recente</h3>
                </div>
                <div id="history-list" class="flex-1 overflow-y-auto p-2 space-y-2">
                    <!-- History Items -->
                </div>
            </div>
        </div>

      </div>
    </div>

    <!-- MAIN LOGIC -->
    <script>
      // --- APP STATE ---
      const app = {
        isAuthenticated: false,
        data: {
          capital: '',
          percent: 10,
          days: 30,
          statuses: [], // 'PENDING', 'WIN', 'LOSS'
          notes: ''
        },
        charts: {
          growth: null,
          bar: null
        }
      };

      // --- INITIALIZATION ---
      document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();
        loadState();
        
        if (app.isAuthenticated) {
          showApp();
        }

        // Event Listeners
        document.getElementById('login-form').addEventListener('submit', handleLogin);
        document.getElementById('input-capital').addEventListener('input', (e) => updateData('capital', e.target.value));
        document.getElementById('config-percent').addEventListener('input', (e) => updateData('percent', parseFloat(e.target.value) || 0));
        document.getElementById('config-days').addEventListener('input', (e) => updateData('days', parseInt(e.target.value) || 30));
        document.getElementById('user-notes').addEventListener('input', (e) => updateData('notes', e.target.value));
      });

      // --- AUTHENTICATION ---
      function handleLogin(e) {
        e.preventDefault();
        const u = document.getElementById('username').value;
        const p = document.getElementById('password').value;

        if (u.toUpperCase() === 'LEONARDO' && p === '884466') {
          app.isAuthenticated = true;
          localStorage.setItem('leozin_auth', 'true');
          showApp();
        } else {
          document.getElementById('login-error').classList.remove('hidden');
        }
      }

      function showApp() {
        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('app-content').classList.remove('hidden');
        
        // Initialize Inputs
        document.getElementById('input-capital').value = app.data.capital;
        document.getElementById('config-percent').value = app.data.percent;
        document.getElementById('config-days').value = app.data.days;
        document.getElementById('user-notes').value = app.data.notes;

        renderAll();
      }

      app.logout = function() {
        app.isAuthenticated = false;
        localStorage.removeItem('leozin_auth');
        window.location.reload();
      };

      app.resetData = function() {
        if(confirm('Tem certeza que deseja apagar tudo?')) {
          localStorage.clear();
          window.location.reload();
        }
      };

      // --- DATA MANAGEMENT ---
      function loadState() {
        app.isAuthenticated = localStorage.getItem('leozin_auth') === 'true';
        app.data.capital = localStorage.getItem('leozin_capital') || '';
        app.data.percent = parseFloat(localStorage.getItem('leozin_percent')) || 10;
        app.data.days = parseInt(localStorage.getItem('leozin_days')) || 30;
        app.data.notes = localStorage.getItem('leozin_notes') || '';
        
        const savedStatuses = localStorage.getItem('leozin_statuses');
        app.data.statuses = savedStatuses ? JSON.parse(savedStatuses) : Array(1000).fill('PENDING');
        
        // Ensure array is long enough if days increased
        if (app.data.statuses.length < app.data.days) {
            const diff = app.data.days - app.data.statuses.length;
            app.data.statuses = [...app.data.statuses, ...Array(diff).fill('PENDING')];
        }
      }

      function saveData() {
        localStorage.setItem('leozin_capital', app.data.capital);
        localStorage.setItem('leozin_percent', app.data.percent);
        localStorage.setItem('leozin_days', app.data.days);
        localStorage.setItem('leozin_notes', app.data.notes);
        localStorage.setItem('leozin_statuses', JSON.stringify(app.data.statuses));
        
        // Save Indicator
        const indicator = document.getElementById('save-status');
        indicator.classList.add('text-yellow-400');
        setTimeout(() => indicator.classList.remove('text-yellow-400'), 1000);
      }

      function updateData(key, value) {
        app.data[key] = value;
        saveData();
        renderAll();
      }

      app.toggleStatus = function(index) {
        const current = app.data.statuses[index] || 'PENDING';
        let next = 'PENDING';
        if (current === 'PENDING') next = 'WIN';
        else if (current === 'WIN') next = 'LOSS';
        else next = 'PENDING';

        app.data.statuses[index] = next;
        saveData();
        renderAll();
      };

      // --- RENDERING ---
      function calculateLogic() {
        const startCap = parseFloat(app.data.capital) || 0;
        let runningBalance = startCap;
        const rows = [];
        let wins = 0;
        let losses = 0;

        for (let i = 0; i < app.data.days; i++) {
          const status = app.data.statuses[i] || 'PENDING';
          const target = runningBalance * (app.data.percent / 100);
          let end = runningBalance;

          if (status === 'WIN') {
            end += target;
            wins++;
          } else if (status === 'LOSS') {
            end -= target;
            losses++;
          }
          
          if (end < 0) end = 0;

          rows.push({
            day: i + 1,
            start: runningBalance,
            target: target,
            end: end,
            status: status
          });

          runningBalance = end;
        }
        
        // Projection logic
        const remaining = app.data.days - (wins + losses);
        let potential = runningBalance;
        if (remaining > 0) {
           potential = runningBalance * Math.pow((1 + (app.data.percent/100)), remaining);
        }

        return { rows, wins, losses, currentBalance: runningBalance, potential };
      }

      function renderAll() {
        const { rows, wins, losses, currentBalance, potential } = calculateLogic();
        
        renderStats(currentBalance, potential, wins, losses);
        renderTable(rows);
        renderHistory(rows);
        renderCharts(rows);
        lucide.createIcons();
      }

      function formatCurrency(val) {
        return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(val);
      }

      function renderStats(bal, pot, w, l) {
        document.getElementById('display-balance').innerText = formatCurrency(bal);
        document.getElementById('display-balance').className = `text-3xl font-mono font-bold tracking-tight ${bal >= (parseFloat(app.data.capital)||0) ? 'text-emerald-400' : 'text-red-400'}`;
        document.getElementById('display-projected').innerText = formatCurrency(pot);
        document.getElementById('stat-wins').innerText = w;
        document.getElementById('stat-losses').innerText = l;
      }

      function renderTable(rows) {
        const tbody = document.getElementById('table-body');
        tbody.innerHTML = rows.map((row, idx) => {
          const isWin = row.status === 'WIN';
          const isLoss = row.status === 'LOSS';
          const isPending = row.status === 'PENDING';
          
          let rowClass = 'bg-white text-black border-b border-gray-400';
          if (isWin) rowClass = 'bg-white text-black border-b border-gray-400'; // Specific green is only on cell or logic? User said "Green background".
          
          // Replicating the image style more precisely:
          // In the image, WIN rows seem to have green highlights in the Result/Status column, 
          // but the user description says "Wins: Bright Green background".
          // I will make the result cell green if WIN.
          
          return `
            <div class="spreadsheet-grid text-sm font-semibold items-center ${rowClass} ${isLoss ? 'bg-red-100' : ''}">
                <div class="p-2 text-center border-r border-gray-400">${row.day}</div>
                <div class="p-2 text-center border-r border-gray-400 font-mono">${formatCurrency(row.start)}</div>
                <div class="p-2 text-center border-r border-gray-400">
                    <div class="flex flex-col items-center leading-tight">
                        <span>${app.data.percent}%</span>
                        <span class="text-[10px] opacity-70">(${formatCurrency(row.target)})</span>
                    </div>
                </div>
                <div onclick="app.toggleStatus(${idx})" class="p-2 text-center border-r border-gray-400 font-mono cursor-pointer hover:opacity-80 select-none ${isWin ? 'bg-green-500 text-black' : ''} ${isLoss ? 'text-red-600' : ''}">
                    ${isPending ? '<span class="text-gray-400">---</span>' : 
                      (isWin ? `+${formatCurrency(row.target)}` : `-${formatCurrency(row.target)}`)
                    }
                </div>
                <div class="p-2 text-center font-mono ${isWin ? 'bg-green-500' : ''}">
                    ${isPending ? '<span class="text-gray-300">R$ -</span>' : formatCurrency(row.end)}
                </div>
            </div>
          `;
        }).join('');
      }

      function renderHistory(rows) {
        const historyList = document.getElementById('history-list');
        const completed = rows.filter(r => r.status !== 'PENDING').reverse();
        
        if (completed.length === 0) {
            historyList.innerHTML = '<div class="text-center text-slate-600 p-4 text-sm">Nenhum registro ainda.</div>';
            return;
        }

        historyList.innerHTML = completed.map(row => `
            <div class="p-3 rounded-lg border flex items-center justify-between text-sm ${row.status === 'WIN' ? 'bg-emerald-950/30 border-emerald-900/50' : 'bg-red-950/30 border-red-900/50'}">
                <div class="flex items-center gap-3">
                    <span class="text-slate-500 font-mono text-xs">Dia ${row.day}</span>
                    <div class="flex items-center gap-1.5 font-bold ${row.status === 'WIN' ? 'text-emerald-400' : 'text-red-400'}">
                        ${row.status === 'WIN' ? '<i data-lucide="trending-up" class="w-3 h-3"></i>' : '<i data-lucide="alert-triangle" class="w-3 h-3"></i>'}
                        ${row.status}
                    </div>
                </div>
                <div class="font-mono font-bold text-slate-200">
                    ${row.status === 'WIN' ? '+' : '-'}${formatCurrency(row.target)}
                </div>
            </div>
        `).join('');
      }

      function renderCharts(rows) {
        if (!app.data.capital) return;
        
        const labels = rows.map(r => `Dia ${r.day}`);
        const dataBalance = rows.map(r => r.end);
        const dataTarget = rows.map(r => r.start + r.target); // Ideal path
        
        const dailyProfit = rows.map(r => {
             if (r.status === 'WIN') return r.target;
             if (r.status === 'LOSS') return -r.target;
             return 0;
        });

        // Destroy old
        if (app.charts.growth) app.charts.growth.destroy();
        if (app.charts.bar) app.charts.bar.destroy();

        // Colors
        const colorPrimary = '#ef4444'; // Red
        const colorGrid = '#1e293b';
        
        // Growth Chart
        const ctxG = document.getElementById('growthChart').getContext('2d');
        app.charts.growth = new Chart(ctxG, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Banca Real',
                    data: dataBalance,
                    borderColor: colorPrimary,
                    backgroundColor: 'rgba(239, 68, 68, 0.2)',
                    fill: true,
                    tension: 0.4,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { display: false },
                    y: { display: false }
                },
                elements: { point: { radius: 0 } }
            }
        });

        // Bar Chart
        const ctxB = document.getElementById('barChart').getContext('2d');
        app.charts.bar = new Chart(ctxB, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Lucro/Prejuízo',
                    data: dailyProfit,
                    backgroundColor: dailyProfit.map(v => v >= 0 ? '#10b981' : '#ef4444'),
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { display: false },
                    y: { display: false, grid: { color: colorGrid } }
                }
            }
        });
      }
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>